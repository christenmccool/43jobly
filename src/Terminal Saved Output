Last login: Fri Jul  2 13:37:56 on ttys001
christenmccool@Christens-MacBook-Pro 26warbler % python3 -m IPython
Python 3.7.10 (default, Apr 27 2021, 08:49:44) 
Type 'copyright', 'credits' or 'license' for more information
IPython 7.24.1 -- An enhanced Interactive Python. Type '?' for help.

In [1]: %run app.py
---------------------------------------------------------------------------
ModuleNotFoundError                       Traceback (most recent call last)
~/Documents/springboard-practice/26warbler/app.py in <module>
      5 from sqlalchemy.exc import IntegrityError
      6 
----> 7 from forms import UserAddForm, LoginForm, MessageForm, UserEditForm
      8 from models import db, connect_db, User, Message
      9 

~/Documents/springboard-practice/26warbler/forms.py in <module>
----> 1 from flask_wtf import FlaskForm
      2 from wtforms import StringField, PasswordField, TextAreaField
      3 from wtforms.validators import DataRequired, Email, Length
      4 
      5 

ModuleNotFoundError: No module named 'flask_wtf'

In [2]: quit()
christenmccool@Christens-MacBook-Pro 26warbler % source venv/bin/activeate
source: no such file or directory: venv/bin/activeate
christenmccool@Christens-MacBook-Pro 26warbler % source venv/bin/activate 
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m IPython       
Python 3.7.10 (default, Apr 27 2021, 08:49:44) 
Type 'copyright', 'credits' or 'license' for more information
IPython 7.0.1 -- An enhanced Interactive Python. Type '?' for help.

In [1]: %run app.py                                                                                                                               

In [2]:                                                                                                                                           

In [2]: messages = Message.query.filter(Message.user in g.user.following).all()                                                                   
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)
<ipython-input-2-d644ac41e1f4> in <module>
----> 1 messages = Message.query.filter(Message.user in g.user.following).all()

~/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/werkzeug/local.py in __getattr__(self, name)
    345         if name == '__members__':
    346             return dir(self._get_current_object())
--> 347         return getattr(self._get_current_object(), name)
    348 
    349     def __setitem__(self, key, value):

~/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/werkzeug/local.py in _get_current_object(self)
    304         """
    305         if not hasattr(self.__local, '__release_local__'):
--> 306             return self.__local()
    307         try:
    308             return getattr(self.__local, self.__name__)

~/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/globals.py in _lookup_app_object(name)
     42     top = _app_ctx_stack.top
     43     if top is None:
---> 44         raise RuntimeError(_app_ctx_err_msg)
     45     return getattr(top, name)
     46 

RuntimeError: Working outside of application context.

This typically means that you attempted to use functionality that needed
to interface with the current application object in some way. To solve
this, set up an application context with app.app_context().  See the
documentation for more information.

In [3]: quit()                                                                                                                                    
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m IPython
Python 3.7.10 (default, Apr 27 2021, 08:49:44) 
Type 'copyright', 'credits' or 'license' for more information
IPython 7.0.1 -- An enhanced Interactive Python. Type '?' for help.

In [1]: %run model.py                                                                                                                             
ERROR:root:File `'model.py'` not found.

In [2]: %run models.py                                                                                                                            

In [3]: messages = Message.query.filter(Message.user in g.user.following).all()                                                                   
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
<ipython-input-3-d644ac41e1f4> in <module>
----> 1 messages = Message.query.filter(Message.user in g.user.following).all()

NameError: name 'g' is not defined

In [4]: messages = Message.query.filter(Message.user in User.query.all()).all()                                                                   

In [5]: messages                                                                                                                                  
Out[5]: []

In [6]: quit()                                                                                                          
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 2158, in _wrap_pool_connect
    return fn()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/pool.py", line 400, in connect
    return _ConnectionFairy._checkout(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/pool.py", line 788, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/pool.py", line 529, in checkout
    rec = pool._do_get()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/pool.py", line 1193, in _do_get
    self._dec_overflow()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 249, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/pool.py", line 1190, in _do_get
    return self._create_connection()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/pool.py", line 347, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/pool.py", line 474, in __init__
    self.__connect(first_connect_check=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/pool.py", line 671, in __connect
    connection = pool._invoke_creator(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/strategies.py", line 106, in connect
    return dialect.connect(*cargs, **cparams)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 412, in connect
    return self.dbapi.connect(*cargs, **cparams)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/psycopg2/__init__.py", line 126, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: FATAL:  database "warbler-test" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/runpy.py", line 193, in _run_module_as_main
    "__main__", mod_spec)
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/runpy.py", line 85, in _run_code
    exec(code, run_globals)
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/__main__.py", line 18, in <module>
    main(module=None)
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/main.py", line 100, in __init__
    self.parseArgs(argv)
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/main.py", line 147, in parseArgs
    self.createTests()
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/main.py", line 159, in createTests
    self.module)
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/loader.py", line 220, in loadTestsFromNames
    suites = [self.loadTestsFromName(name, module) for name in names]
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/loader.py", line 220, in <listcomp>
    suites = [self.loadTestsFromName(name, module) for name in names]
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/loader.py", line 154, in loadTestsFromName
    module = __import__(module_name)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 29, in <module>
    db.create_all()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask_sqlalchemy/__init__.py", line 963, in create_all
    self._execute_for_all_tables(app, bind, 'create_all')
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask_sqlalchemy/__init__.py", line 955, in _execute_for_all_tables
    op(bind=self.get_engine(app, bind), **extra)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/sql/schema.py", line 4005, in create_all
    tables=tables)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1939, in _run_visitor
    with self._optional_conn_ctx_manager(connection) as conn:
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/contextlib.py", line 112, in __enter__
    return next(self.gen)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1932, in _optional_conn_ctx_manager
    with self.contextual_connect() as conn:
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 2123, in contextual_connect
    self._wrap_pool_connect(self.pool.connect, None),
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 2162, in _wrap_pool_connect
    e, dialect, self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1476, in _handle_dbapi_exception_noconnection
    exc_info
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 265, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 248, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 2158, in _wrap_pool_connect
    return fn()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/pool.py", line 400, in connect
    return _ConnectionFairy._checkout(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/pool.py", line 788, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/pool.py", line 529, in checkout
    rec = pool._do_get()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/pool.py", line 1193, in _do_get
    self._dec_overflow()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 249, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/pool.py", line 1190, in _do_get
    return self._create_connection()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/pool.py", line 347, in _create_connection
    return _ConnectionRecord(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/pool.py", line 474, in __init__
    self.__connect(first_connect_check=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/pool.py", line 671, in __connect
    connection = pool._invoke_creator(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/strategies.py", line 106, in connect
    return dialect.connect(*cargs, **cparams)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 412, in connect
    return self.dbapi.connect(*cargs, **cparams)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/psycopg2/__init__.py", line 126, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) FATAL:  database "warbler-test" does not exist
 (Background on this error at: http://sqlalche.me/e/e3q8)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % createdb warbler-test
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
.
----------------------------------------------------------------------
Ran 1 test in 0.021s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
E.
======================================================================
ERROR: test_repr_method (test_user_model.UserModelTestCase)
Does repr method work?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 73, in test_repr_method
    self.assertEqual(u.repr(), "<User #1: testuser, test@test.com>")
AttributeError: 'User' object has no attribute 'repr'

----------------------------------------------------------------------
Ran 2 tests in 0.028s

FAILED (errors=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
F.
======================================================================
FAIL: test_repr_method (test_user_model.UserModelTestCase)
Does repr method work?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 73, in test_repr_method
    self.assertEqual(u.__repr__(), "<User #1: testuser, test@test.com>")
AssertionError: '<User #4: testuser, test@test.com>' != '<User #1: testuser, test@test.com>'
- <User #4: testuser, test@test.com>
?        ^
+ <User #1: testuser, test@test.com>
?        ^


----------------------------------------------------------------------
Ran 2 tests in 0.029s

FAILED (failures=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
..
----------------------------------------------------------------------
Ran 2 tests in 0.028s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
E..
======================================================================
ERROR: test_is_following_method (test_user_model.UserModelTestCase)
Does repr method work?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 94, in test_is_following_method
    follows = Follows(u2.id, u1.id)
TypeError: __init__() takes 1 positional argument but 3 were given

----------------------------------------------------------------------
Ran 3 tests in 0.033s

FAILED (errors=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
...
----------------------------------------------------------------------
Ran 3 tests in 0.038s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
...
----------------------------------------------------------------------
Ran 3 tests in 0.037s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
...
----------------------------------------------------------------------
Ran 3 tests in 0.037s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
....
----------------------------------------------------------------------
Ran 4 tests in 0.041s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
Traceback (most recent call last):
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/runpy.py", line 193, in _run_module_as_main
    "__main__", mod_spec)
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/runpy.py", line 85, in _run_code
    exec(code, run_globals)
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/__main__.py", line 18, in <module>
    main(module=None)
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/main.py", line 100, in __init__
    self.parseArgs(argv)
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/main.py", line 147, in parseArgs
    self.createTests()
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/main.py", line 159, in createTests
    self.module)
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/loader.py", line 220, in loadTestsFromNames
    suites = [self.loadTestsFromName(name, module) for name in names]
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/loader.py", line 220, in <listcomp>
    suites = [self.loadTestsFromName(name, module) for name in names]
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/loader.py", line 154, in loadTestsFromName
    module = __import__(module_name)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 104
    u1 = User(
    ^
IndentationError: unexpected indent
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
.....
----------------------------------------------------------------------
Ran 5 tests in 0.050s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
......
----------------------------------------------------------------------
Ran 6 tests in 0.054s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
Traceback (most recent call last):
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/runpy.py", line 193, in _run_module_as_main
    "__main__", mod_spec)
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/runpy.py", line 85, in _run_code
    exec(code, run_globals)
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/__main__.py", line 18, in <module>
    main(module=None)
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/main.py", line 100, in __init__
    self.parseArgs(argv)
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/main.py", line 147, in parseArgs
    self.createTests()
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/main.py", line 159, in createTests
    self.module)
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/loader.py", line 220, in loadTestsFromNames
    suites = [self.loadTestsFromName(name, module) for name in names]
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/loader.py", line 220, in <listcomp>
    suites = [self.loadTestsFromName(name, module) for name in names]
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/loader.py", line 154, in loadTestsFromName
    module = __import__(module_name)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 174
    def test_user_signup(self):
                              ^
IndentationError: unindent does not match any outer indentation level
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
......E
======================================================================
ERROR: test_user_signup (test_user_model.UserModelTestCase)
Does User.signup successfully create a new User?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 180, in test_user_signup
    password="HASHED_PASSWORD"
TypeError: signup() missing 1 required positional argument: 'image_url'

----------------------------------------------------------------------
Ran 7 tests in 0.062s

FAILED (errors=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
......F
======================================================================
FAIL: test_user_signup (test_user_model.UserModelTestCase)
Does User.signup successfully create a new User?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 188, in test_user_signup
    self.assertIs(u, User)
AssertionError: <User #68: testuser, test@test.com> is not <class 'models.User'>

----------------------------------------------------------------------
Ran 7 tests in 0.335s

FAILED (failures=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
.......
----------------------------------------------------------------------
Ran 7 tests in 0.327s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
....E...
======================================================================
ERROR: test_no_user_signup (test_user_model.UserModelTestCase)
Does User.signup fail to create a new User when a non-nullable field is left blank?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 204, in test_no_user_signup
    self.assertIsNotInstance(u, User)
AttributeError: 'UserModelTestCase' object has no attribute 'assertIsNotInstance'

----------------------------------------------------------------------
Ran 8 tests in 0.605s

FAILED (errors=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
....F...
======================================================================
FAIL: test_no_user_signup (test_user_model.UserModelTestCase)
Does User.signup fail to create a new User when a non-nullable field is left blank?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 204, in test_no_user_signup
    self.assertNotIsInstance(u, User)
AssertionError: <User #100: testuser, > is an instance of <class 'models.User'>

----------------------------------------------------------------------
Ran 8 tests in 0.603s

FAILED (failures=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
....EEEE
======================================================================
ERROR: test_no_user_signup (test_user_model.UserModelTestCase)
Does User.signup fail to create a new User when a non-nullable field is left blank?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "email" of relation "users" violates not-null constraint
DETAIL:  Failing row contains (112, null, testuser, User.image_url.default.arg, /static/images/warbler-hero.jpg, null, null, $2b$12$RRwXyyWi1CHIyl6evJBfDesCaYEamDV8cSrRdrDQmpACl.UR6VTia).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 201, in test_no_user_signup
    db.session.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 249, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 265, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 248, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "email" of relation "users" violates not-null constraint
DETAIL:  Failing row contains (112, null, testuser, User.image_url.default.arg, /static/images/warbler-hero.jpg, null, null, $2b$12$RRwXyyWi1CHIyl6evJBfDesCaYEamDV8cSrRdrDQmpACl.UR6VTia).
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': None, 'username': 'testuser', 'image_url': 'User.image_url.default.arg', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$RRwXyyWi1CHIyl6evJBfDesCaYEamDV8cSrRdrDQmpACl.UR6VTia'}] (Background on this error at: http://sqlalche.me/e/gkpj)

======================================================================
ERROR: test_repr_method (test_user_model.UserModelTestCase)
Does repr method work?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 38, in setUp
    User.query.delete()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3353, in delete
    delete_op.exec_()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1329, in exec_
    self._do_exec()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1521, in _do_exec
    self._execute_stmt(delete_stmt)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1336, in _execute_stmt
    mapper=self.mapper)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1176, in execute
    bind, close_with_result=True).execute(clause, params or {})
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1040, in _connection_for_bind
    engine, execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 388, in _connection_for_bind
    self._assert_active()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    % self._rollback_exception
sqlalchemy.exc.InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.NotNullViolation) null value in column "email" of relation "users" violates not-null constraint
DETAIL:  Failing row contains (112, null, testuser, User.image_url.default.arg, /static/images/warbler-hero.jpg, null, null, $2b$12$RRwXyyWi1CHIyl6evJBfDesCaYEamDV8cSrRdrDQmpACl.UR6VTia).
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': None, 'username': 'testuser', 'image_url': 'User.image_url.default.arg', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$RRwXyyWi1CHIyl6evJBfDesCaYEamDV8cSrRdrDQmpACl.UR6VTia'}] (Background on this error at: http://sqlalche.me/e/gkpj)

======================================================================
ERROR: test_user_model (test_user_model.UserModelTestCase)
Does basic model work?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 38, in setUp
    User.query.delete()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3353, in delete
    delete_op.exec_()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1329, in exec_
    self._do_exec()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1521, in _do_exec
    self._execute_stmt(delete_stmt)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1336, in _execute_stmt
    mapper=self.mapper)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1176, in execute
    bind, close_with_result=True).execute(clause, params or {})
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1040, in _connection_for_bind
    engine, execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 388, in _connection_for_bind
    self._assert_active()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    % self._rollback_exception
sqlalchemy.exc.InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.NotNullViolation) null value in column "email" of relation "users" violates not-null constraint
DETAIL:  Failing row contains (112, null, testuser, User.image_url.default.arg, /static/images/warbler-hero.jpg, null, null, $2b$12$RRwXyyWi1CHIyl6evJBfDesCaYEamDV8cSrRdrDQmpACl.UR6VTia).
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': None, 'username': 'testuser', 'image_url': 'User.image_url.default.arg', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$RRwXyyWi1CHIyl6evJBfDesCaYEamDV8cSrRdrDQmpACl.UR6VTia'}] (Background on this error at: http://sqlalche.me/e/gkpj)

======================================================================
ERROR: test_user_signup (test_user_model.UserModelTestCase)
Does User.signup successfully create a new User?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 38, in setUp
    User.query.delete()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3353, in delete
    delete_op.exec_()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1329, in exec_
    self._do_exec()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1521, in _do_exec
    self._execute_stmt(delete_stmt)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1336, in _execute_stmt
    mapper=self.mapper)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1176, in execute
    bind, close_with_result=True).execute(clause, params or {})
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1040, in _connection_for_bind
    engine, execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 388, in _connection_for_bind
    self._assert_active()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    % self._rollback_exception
sqlalchemy.exc.InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.NotNullViolation) null value in column "email" of relation "users" violates not-null constraint
DETAIL:  Failing row contains (112, null, testuser, User.image_url.default.arg, /static/images/warbler-hero.jpg, null, null, $2b$12$RRwXyyWi1CHIyl6evJBfDesCaYEamDV8cSrRdrDQmpACl.UR6VTia).
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': None, 'username': 'testuser', 'image_url': 'User.image_url.default.arg', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$RRwXyyWi1CHIyl6evJBfDesCaYEamDV8cSrRdrDQmpACl.UR6VTia'}] (Background on this error at: http://sqlalche.me/e/gkpj)

----------------------------------------------------------------------
Ran 8 tests in 0.332s

FAILED (errors=4)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
....EEEE
======================================================================
ERROR: test_no_user_signup (test_user_model.UserModelTestCase)
Does User.signup fail to create a new User when a non-nullable field is left blank?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "email" of relation "users" violates not-null constraint
DETAIL:  Failing row contains (121, null, testuser, User.image_url.default.arg, /static/images/warbler-hero.jpg, null, null, $2b$12$z7lZw0nap2owOLYdfhPhy.4oiUlI78jXx6H7JNlt15aH0x2VtEQJ2).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 201, in test_no_user_signup
    db.session.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 249, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 265, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 248, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "email" of relation "users" violates not-null constraint
DETAIL:  Failing row contains (121, null, testuser, User.image_url.default.arg, /static/images/warbler-hero.jpg, null, null, $2b$12$z7lZw0nap2owOLYdfhPhy.4oiUlI78jXx6H7JNlt15aH0x2VtEQJ2).
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': None, 'username': 'testuser', 'image_url': 'User.image_url.default.arg', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$z7lZw0nap2owOLYdfhPhy.4oiUlI78jXx6H7JNlt15aH0x2VtEQJ2'}] (Background on this error at: http://sqlalche.me/e/gkpj)

======================================================================
ERROR: test_repr_method (test_user_model.UserModelTestCase)
Does repr method work?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 38, in setUp
    User.query.delete()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3353, in delete
    delete_op.exec_()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1329, in exec_
    self._do_exec()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1521, in _do_exec
    self._execute_stmt(delete_stmt)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1336, in _execute_stmt
    mapper=self.mapper)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1176, in execute
    bind, close_with_result=True).execute(clause, params or {})
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1040, in _connection_for_bind
    engine, execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 388, in _connection_for_bind
    self._assert_active()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    % self._rollback_exception
sqlalchemy.exc.InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.NotNullViolation) null value in column "email" of relation "users" violates not-null constraint
DETAIL:  Failing row contains (121, null, testuser, User.image_url.default.arg, /static/images/warbler-hero.jpg, null, null, $2b$12$z7lZw0nap2owOLYdfhPhy.4oiUlI78jXx6H7JNlt15aH0x2VtEQJ2).
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': None, 'username': 'testuser', 'image_url': 'User.image_url.default.arg', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$z7lZw0nap2owOLYdfhPhy.4oiUlI78jXx6H7JNlt15aH0x2VtEQJ2'}] (Background on this error at: http://sqlalche.me/e/gkpj)

======================================================================
ERROR: test_user_model (test_user_model.UserModelTestCase)
Does basic model work?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 38, in setUp
    User.query.delete()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3353, in delete
    delete_op.exec_()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1329, in exec_
    self._do_exec()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1521, in _do_exec
    self._execute_stmt(delete_stmt)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1336, in _execute_stmt
    mapper=self.mapper)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1176, in execute
    bind, close_with_result=True).execute(clause, params or {})
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1040, in _connection_for_bind
    engine, execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 388, in _connection_for_bind
    self._assert_active()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    % self._rollback_exception
sqlalchemy.exc.InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.NotNullViolation) null value in column "email" of relation "users" violates not-null constraint
DETAIL:  Failing row contains (121, null, testuser, User.image_url.default.arg, /static/images/warbler-hero.jpg, null, null, $2b$12$z7lZw0nap2owOLYdfhPhy.4oiUlI78jXx6H7JNlt15aH0x2VtEQJ2).
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': None, 'username': 'testuser', 'image_url': 'User.image_url.default.arg', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$z7lZw0nap2owOLYdfhPhy.4oiUlI78jXx6H7JNlt15aH0x2VtEQJ2'}] (Background on this error at: http://sqlalche.me/e/gkpj)

======================================================================
ERROR: test_user_signup (test_user_model.UserModelTestCase)
Does User.signup successfully create a new User?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 38, in setUp
    User.query.delete()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3353, in delete
    delete_op.exec_()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1329, in exec_
    self._do_exec()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1521, in _do_exec
    self._execute_stmt(delete_stmt)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1336, in _execute_stmt
    mapper=self.mapper)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1176, in execute
    bind, close_with_result=True).execute(clause, params or {})
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1040, in _connection_for_bind
    engine, execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 388, in _connection_for_bind
    self._assert_active()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    % self._rollback_exception
sqlalchemy.exc.InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.NotNullViolation) null value in column "email" of relation "users" violates not-null constraint
DETAIL:  Failing row contains (121, null, testuser, User.image_url.default.arg, /static/images/warbler-hero.jpg, null, null, $2b$12$z7lZw0nap2owOLYdfhPhy.4oiUlI78jXx6H7JNlt15aH0x2VtEQJ2).
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': None, 'username': 'testuser', 'image_url': 'User.image_url.default.arg', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$z7lZw0nap2owOLYdfhPhy.4oiUlI78jXx6H7JNlt15aH0x2VtEQJ2'}] (Background on this error at: http://sqlalche.me/e/gkpj)

----------------------------------------------------------------------
Ran 8 tests in 0.331s

FAILED (errors=4)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % db.session.rollback()
function> 
function> quit()
function function> 
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
....EEEE
======================================================================
ERROR: test_no_user_signup (test_user_model.UserModelTestCase)
Does User.signup fail to create a new User when a non-nullable field is left blank?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "email" of relation "users" violates not-null constraint
DETAIL:  Failing row contains (130, null, testuser, User.image_url.default.arg, /static/images/warbler-hero.jpg, null, null, $2b$12$KYfjoHJ5/VtlU/PwjVjxmeezBNY7aXYeB/Tvv3jYxHW1XfnU8lBNe).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 201, in test_no_user_signup
    db.session.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 249, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 265, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 248, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "email" of relation "users" violates not-null constraint
DETAIL:  Failing row contains (130, null, testuser, User.image_url.default.arg, /static/images/warbler-hero.jpg, null, null, $2b$12$KYfjoHJ5/VtlU/PwjVjxmeezBNY7aXYeB/Tvv3jYxHW1XfnU8lBNe).
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': None, 'username': 'testuser', 'image_url': 'User.image_url.default.arg', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$KYfjoHJ5/VtlU/PwjVjxmeezBNY7aXYeB/Tvv3jYxHW1XfnU8lBNe'}] (Background on this error at: http://sqlalche.me/e/gkpj)

======================================================================
ERROR: test_repr_method (test_user_model.UserModelTestCase)
Does repr method work?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 38, in setUp
    User.query.delete()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3353, in delete
    delete_op.exec_()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1329, in exec_
    self._do_exec()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1521, in _do_exec
    self._execute_stmt(delete_stmt)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1336, in _execute_stmt
    mapper=self.mapper)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1176, in execute
    bind, close_with_result=True).execute(clause, params or {})
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1040, in _connection_for_bind
    engine, execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 388, in _connection_for_bind
    self._assert_active()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    % self._rollback_exception
sqlalchemy.exc.InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.NotNullViolation) null value in column "email" of relation "users" violates not-null constraint
DETAIL:  Failing row contains (130, null, testuser, User.image_url.default.arg, /static/images/warbler-hero.jpg, null, null, $2b$12$KYfjoHJ5/VtlU/PwjVjxmeezBNY7aXYeB/Tvv3jYxHW1XfnU8lBNe).
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': None, 'username': 'testuser', 'image_url': 'User.image_url.default.arg', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$KYfjoHJ5/VtlU/PwjVjxmeezBNY7aXYeB/Tvv3jYxHW1XfnU8lBNe'}] (Background on this error at: http://sqlalche.me/e/gkpj)

======================================================================
ERROR: test_user_model (test_user_model.UserModelTestCase)
Does basic model work?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 38, in setUp
    User.query.delete()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3353, in delete
    delete_op.exec_()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1329, in exec_
    self._do_exec()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1521, in _do_exec
    self._execute_stmt(delete_stmt)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1336, in _execute_stmt
    mapper=self.mapper)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1176, in execute
    bind, close_with_result=True).execute(clause, params or {})
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1040, in _connection_for_bind
    engine, execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 388, in _connection_for_bind
    self._assert_active()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    % self._rollback_exception
sqlalchemy.exc.InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.NotNullViolation) null value in column "email" of relation "users" violates not-null constraint
DETAIL:  Failing row contains (130, null, testuser, User.image_url.default.arg, /static/images/warbler-hero.jpg, null, null, $2b$12$KYfjoHJ5/VtlU/PwjVjxmeezBNY7aXYeB/Tvv3jYxHW1XfnU8lBNe).
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': None, 'username': 'testuser', 'image_url': 'User.image_url.default.arg', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$KYfjoHJ5/VtlU/PwjVjxmeezBNY7aXYeB/Tvv3jYxHW1XfnU8lBNe'}] (Background on this error at: http://sqlalche.me/e/gkpj)

======================================================================
ERROR: test_user_signup (test_user_model.UserModelTestCase)
Does User.signup successfully create a new User?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 38, in setUp
    User.query.delete()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3353, in delete
    delete_op.exec_()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1329, in exec_
    self._do_exec()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1521, in _do_exec
    self._execute_stmt(delete_stmt)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1336, in _execute_stmt
    mapper=self.mapper)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1176, in execute
    bind, close_with_result=True).execute(clause, params or {})
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1040, in _connection_for_bind
    engine, execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 388, in _connection_for_bind
    self._assert_active()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    % self._rollback_exception
sqlalchemy.exc.InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.NotNullViolation) null value in column "email" of relation "users" violates not-null constraint
DETAIL:  Failing row contains (130, null, testuser, User.image_url.default.arg, /static/images/warbler-hero.jpg, null, null, $2b$12$KYfjoHJ5/VtlU/PwjVjxmeezBNY7aXYeB/Tvv3jYxHW1XfnU8lBNe).
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': None, 'username': 'testuser', 'image_url': 'User.image_url.default.arg', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$KYfjoHJ5/VtlU/PwjVjxmeezBNY7aXYeB/Tvv3jYxHW1XfnU8lBNe'}] (Background on this error at: http://sqlalche.me/e/gkpj)

----------------------------------------------------------------------
Ran 8 tests in 0.344s

FAILED (errors=4)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
.......
----------------------------------------------------------------------
Ran 7 tests in 0.338s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
....EEEE
======================================================================
ERROR: test_no_user_signup (test_user_model.UserModelTestCase)
Does User.signup fail to create a new User when a non-nullable field is left blank?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "email" of relation "users" violates not-null constraint
DETAIL:  Failing row contains (150, null, testuser, User.image_url.default.arg, /static/images/warbler-hero.jpg, null, null, $2b$12$vmFEd59AdeQqWrCh1q0WQOK6MLpdUIMv0eXx.BaFjLdnRPLpur2NK).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 201, in test_no_user_signup
    db.session.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 249, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 265, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 248, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "email" of relation "users" violates not-null constraint
DETAIL:  Failing row contains (150, null, testuser, User.image_url.default.arg, /static/images/warbler-hero.jpg, null, null, $2b$12$vmFEd59AdeQqWrCh1q0WQOK6MLpdUIMv0eXx.BaFjLdnRPLpur2NK).
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': None, 'username': 'testuser', 'image_url': 'User.image_url.default.arg', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$vmFEd59AdeQqWrCh1q0WQOK6MLpdUIMv0eXx.BaFjLdnRPLpur2NK'}] (Background on this error at: http://sqlalche.me/e/gkpj)

======================================================================
ERROR: test_repr_method (test_user_model.UserModelTestCase)
Does repr method work?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 38, in setUp
    User.query.delete()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3353, in delete
    delete_op.exec_()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1329, in exec_
    self._do_exec()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1521, in _do_exec
    self._execute_stmt(delete_stmt)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1336, in _execute_stmt
    mapper=self.mapper)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1176, in execute
    bind, close_with_result=True).execute(clause, params or {})
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1040, in _connection_for_bind
    engine, execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 388, in _connection_for_bind
    self._assert_active()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    % self._rollback_exception
sqlalchemy.exc.InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.NotNullViolation) null value in column "email" of relation "users" violates not-null constraint
DETAIL:  Failing row contains (150, null, testuser, User.image_url.default.arg, /static/images/warbler-hero.jpg, null, null, $2b$12$vmFEd59AdeQqWrCh1q0WQOK6MLpdUIMv0eXx.BaFjLdnRPLpur2NK).
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': None, 'username': 'testuser', 'image_url': 'User.image_url.default.arg', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$vmFEd59AdeQqWrCh1q0WQOK6MLpdUIMv0eXx.BaFjLdnRPLpur2NK'}] (Background on this error at: http://sqlalche.me/e/gkpj)

======================================================================
ERROR: test_user_model (test_user_model.UserModelTestCase)
Does basic model work?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 38, in setUp
    User.query.delete()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3353, in delete
    delete_op.exec_()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1329, in exec_
    self._do_exec()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1521, in _do_exec
    self._execute_stmt(delete_stmt)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1336, in _execute_stmt
    mapper=self.mapper)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1176, in execute
    bind, close_with_result=True).execute(clause, params or {})
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1040, in _connection_for_bind
    engine, execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 388, in _connection_for_bind
    self._assert_active()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    % self._rollback_exception
sqlalchemy.exc.InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.NotNullViolation) null value in column "email" of relation "users" violates not-null constraint
DETAIL:  Failing row contains (150, null, testuser, User.image_url.default.arg, /static/images/warbler-hero.jpg, null, null, $2b$12$vmFEd59AdeQqWrCh1q0WQOK6MLpdUIMv0eXx.BaFjLdnRPLpur2NK).
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': None, 'username': 'testuser', 'image_url': 'User.image_url.default.arg', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$vmFEd59AdeQqWrCh1q0WQOK6MLpdUIMv0eXx.BaFjLdnRPLpur2NK'}] (Background on this error at: http://sqlalche.me/e/gkpj)

======================================================================
ERROR: test_user_signup (test_user_model.UserModelTestCase)
Does User.signup successfully create a new User?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 38, in setUp
    User.query.delete()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3353, in delete
    delete_op.exec_()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1329, in exec_
    self._do_exec()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1521, in _do_exec
    self._execute_stmt(delete_stmt)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1336, in _execute_stmt
    mapper=self.mapper)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1176, in execute
    bind, close_with_result=True).execute(clause, params or {})
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1040, in _connection_for_bind
    engine, execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 388, in _connection_for_bind
    self._assert_active()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    % self._rollback_exception
sqlalchemy.exc.InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.NotNullViolation) null value in column "email" of relation "users" violates not-null constraint
DETAIL:  Failing row contains (150, null, testuser, User.image_url.default.arg, /static/images/warbler-hero.jpg, null, null, $2b$12$vmFEd59AdeQqWrCh1q0WQOK6MLpdUIMv0eXx.BaFjLdnRPLpur2NK).
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': None, 'username': 'testuser', 'image_url': 'User.image_url.default.arg', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$vmFEd59AdeQqWrCh1q0WQOK6MLpdUIMv0eXx.BaFjLdnRPLpur2NK'}] (Background on this error at: http://sqlalche.me/e/gkpj)

----------------------------------------------------------------------
Ran 8 tests in 0.328s

FAILED (errors=4)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
.......
----------------------------------------------------------------------
Ran 7 tests in 0.326s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
....E...
======================================================================
ERROR: test_no_user_signup (test_user_model.UserModelTestCase)
Does User.signup fail to create a new User when a non-nullable field is left blank?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 196, in test_no_user_signup
    image_url="User.image_url.default.arg"
TypeError: signup() missing 1 required positional argument: 'email'

----------------------------------------------------------------------
Ran 8 tests in 0.326s

FAILED (errors=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
....E...
======================================================================
ERROR: test_no_user_signup (test_user_model.UserModelTestCase)
Does User.signup fail to create a new User when a non-nullable field is left blank?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_model.py", line 196, in test_no_user_signup
    image_url="User.image_url.default.arg"
TypeError: signup() missing 1 required positional argument: 'email'

----------------------------------------------------------------------
Ran 8 tests in 0.333s

FAILED (errors=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
........
----------------------------------------------------------------------
Ran 8 tests in 0.331s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
.........
----------------------------------------------------------------------
Ran 9 tests in 0.867s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_model.py
.........
----------------------------------------------------------------------
Ran 9 tests in 0.868s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_message_model.py
E
======================================================================
ERROR: test_message_model (test_message_model.MessageModelTestCase)
Does basic model work?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.ForeignKeyViolation: insert or update on table "messages" violates foreign key constraint "messages_user_id_fkey"
DETAIL:  Key (user_id)=(1) is not present in table "users".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_message_model.py", line 41, in test_message_model
    db.session.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 249, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 265, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 248, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation) insert or update on table "messages" violates foreign key constraint "messages_user_id_fkey"
DETAIL:  Key (user_id)=(1) is not present in table "users".
 [SQL: 'INSERT INTO messages (text, timestamp, user_id) VALUES (%(text)s, %(timestamp)s, %(user_id)s) RETURNING messages.id'] [parameters: {'text': 'Went to the ocean today!', 'timestamp': datetime.datetime(2021, 7, 3, 1, 52, 29, 457971), 'user_id': 1}] (Background on this error at: http://sqlalche.me/e/gkpj)

----------------------------------------------------------------------
Ran 1 test in 0.029s

FAILED (errors=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_message_model.py
E
======================================================================
ERROR: test_message_model (test_message_model.MessageModelTestCase)
Does basic model work?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "user_id" of relation "messages" violates not-null constraint
DETAIL:  Failing row contains (2, Went to the ocean today!, 2021-07-03 01:53:07.834343, null).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_message_model.py", line 48, in test_message_model
    db.session.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 249, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 265, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 248, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "user_id" of relation "messages" violates not-null constraint
DETAIL:  Failing row contains (2, Went to the ocean today!, 2021-07-03 01:53:07.834343, null).
 [SQL: 'INSERT INTO messages (text, timestamp, user_id) VALUES (%(text)s, %(timestamp)s, %(user_id)s) RETURNING messages.id'] [parameters: {'text': 'Went to the ocean today!', 'timestamp': datetime.datetime(2021, 7, 3, 1, 53, 7, 834343), 'user_id': None}] (Background on this error at: http://sqlalche.me/e/gkpj)

----------------------------------------------------------------------
Ran 1 test in 0.296s

FAILED (errors=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_message_model.py
.
----------------------------------------------------------------------
Ran 1 test in 0.295s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_message_model.py
.
----------------------------------------------------------------------
Ran 1 test in 0.296s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_message_model.py
E
======================================================================
ERROR: test_message_model (test_message_model.MessageModelTestCase)
Does basic model work?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_message_model.py", line 55, in test_message_model
    self.assertEqual(len(m.likes), 0)
AttributeError: 'Message' object has no attribute 'likes'

----------------------------------------------------------------------
Ran 1 test in 0.297s

FAILED (errors=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_message_model.py
E
======================================================================
ERROR: test_message_model (test_message_model.MessageModelTestCase)
Does basic model work?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_message_model.py", line 55, in test_message_model
    self.assertEqual(len(m.likes), 0)
AttributeError: 'Message' object has no attribute 'likes'

----------------------------------------------------------------------
Ran 1 test in 0.296s

FAILED (errors=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_message_model.py
.
----------------------------------------------------------------------
Ran 1 test in 0.299s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_message_model.py
.F
======================================================================
FAIL: test_no_message (test_message_model.MessageModelTestCase)
Does Message fail to create a new Message when a non-nullable field is left blank?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_message_model.py", line 66, in test_no_message
    self.assertRaises(TypeError, Message, text="Went to the ocean today!", user_id=u.id)
AssertionError: TypeError not raised by Message

----------------------------------------------------------------------
Ran 2 tests in 0.571s

FAILED (failures=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_message_model.py
.F
======================================================================
FAIL: test_no_message (test_message_model.MessageModelTestCase)
Does Message fail to create a new Message when a non-nullable field is left blank?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_message_model.py", line 66, in test_no_message
    self.assertRaises(TypeError, Message, text="Went to the ocean today!")
AssertionError: TypeError not raised by Message

----------------------------------------------------------------------
Ran 2 tests in 0.566s

FAILED (failures=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_message_model.py
.F
======================================================================
FAIL: test_no_message (test_message_model.MessageModelTestCase)
Does Message fail to create a new Message when a non-nullable field is left blank?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_message_model.py", line 66, in test_no_message
    self.assertRaises(TypeError, Message)
AssertionError: TypeError not raised by Message

----------------------------------------------------------------------
Ran 2 tests in 0.567s

FAILED (failures=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_message_model.py
..
----------------------------------------------------------------------
Ran 2 tests in 0.566s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_message_model.py
.<Message (transient 4555704976)>
.
----------------------------------------------------------------------
Ran 2 tests in 0.567s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_message_model.py
.<Message (transient 4491111312)>
.
----------------------------------------------------------------------
Ran 2 tests in 0.567s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_message_model.py
.None
.
----------------------------------------------------------------------
Ran 2 tests in 0.568s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_message_model.py
.E
======================================================================
ERROR: test_no_message (test_message_model.MessageModelTestCase)
Does Message fail to create a new Message when a non-nullable field is left blank?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "text" of relation "messages" violates not-null constraint
DETAIL:  Failing row contains (16, null, 2021-07-03 02:03:50.263251, null).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_message_model.py", line 72, in test_no_message
    self.assertRaises(TypeError, db.session.commit)
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/case.py", line 756, in assertRaises
    return context.handle('assertRaises', args, kwargs)
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/case.py", line 178, in handle
    callable_obj(*args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 249, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 265, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 248, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "text" of relation "messages" violates not-null constraint
DETAIL:  Failing row contains (16, null, 2021-07-03 02:03:50.263251, null).
 [SQL: 'INSERT INTO messages (text, timestamp, user_id) VALUES (%(text)s, %(timestamp)s, %(user_id)s) RETURNING messages.id'] [parameters: {'text': None, 'timestamp': datetime.datetime(2021, 7, 3, 2, 3, 50, 263251), 'user_id': None}] (Background on this error at: http://sqlalche.me/e/gkpj)

----------------------------------------------------------------------
Ran 2 tests in 0.580s

FAILED (errors=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_message_model.py
.E
======================================================================
ERROR: test_no_message (test_message_model.MessageModelTestCase)
Does Message fail to create a new Message when a non-nullable field is left blank?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "text" of relation "messages" violates not-null constraint
DETAIL:  Failing row contains (18, null, 2021-07-03 02:04:20.290257, 235).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_message_model.py", line 73, in test_no_message
    self.assertRaises(TypeError, db.session.commit)
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/case.py", line 756, in assertRaises
    return context.handle('assertRaises', args, kwargs)
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/case.py", line 178, in handle
    callable_obj(*args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 249, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 265, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 248, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "text" of relation "messages" violates not-null constraint
DETAIL:  Failing row contains (18, null, 2021-07-03 02:04:20.290257, 235).
 [SQL: 'INSERT INTO messages (text, timestamp, user_id) VALUES (%(text)s, %(timestamp)s, %(user_id)s) RETURNING messages.id'] [parameters: {'text': None, 'timestamp': datetime.datetime(2021, 7, 3, 2, 4, 20, 290257), 'user_id': 235}] (Background on this error at: http://sqlalche.me/e/gkpj)

----------------------------------------------------------------------
Ran 2 tests in 0.579s

FAILED (errors=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_message_model.py
.E
======================================================================
ERROR: test_no_message (test_message_model.MessageModelTestCase)
Does Message fail to create a new Message when a non-nullable field is left blank?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_message_model.py", line 73, in test_no_message
    self.assertRaises(IntegrityError, db.session.commit)
NameError: name 'IntegrityError' is not defined

----------------------------------------------------------------------
Ran 2 tests in 0.571s

FAILED (errors=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_message_model.py
.E
======================================================================
ERROR: test_no_message (test_message_model.MessageModelTestCase)
Does Message fail to create a new Message when a non-nullable field is left blank?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_message_model.py", line 73, in test_no_message
    self.assertRaises(sqlalchemy.exc.IntegrityError, db.session.commit)
NameError: name 'sqlalchemy' is not defined

----------------------------------------------------------------------
Ran 2 tests in 0.569s

FAILED (errors=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_message_model.py
..
----------------------------------------------------------------------
Ran 2 tests in 0.575s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_message_views.py
.F
======================================================================
FAIL: test_add_message_follows_redirects (test_message_views.MessageViewTestCase)
Can use add a message?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_message_views.py", line 95, in test_add_message_follows_redirects
    self.assertIn(html, f'<a href="/users/{msg.user_id}">@{msg.user.username}</a>')
AssertionError: '<!DOCTYPE html>\n<html lang="en">\n\n<head>\n  <meta charset="UTF-8">\n  <title>Warbler</title>\n\n  <link rel="stylesheet"\n        href="https://unpkg.com/bootstrap/dist/css/bootstrap.css">\n  <script src="https://unpkg.com/jquery"></script>\n  <script src="https://unpkg.com/popper"></script>\n  <script src="https://unpkg.com/bootstrap"></script>\n\n  <link rel="stylesheet"\n        href="https://use.fontawesome.com/releases/v5.3.1/css/all.css">\n  <link rel="stylesheet" href="/static/stylesheets/style.css">\n  <link rel="shortcut icon" href="/static/favicon.ico">\n</head>\n\n<body class="">\n<nav class="navbar navbar-expand">\n  <div class="container-fluid">\n    <div class="navbar-header">\n      <a href="/" class="navbar-brand">\n        <img src="/static/images/warbler-logo.png" alt="logo">\n        <span>Warbler</span>\n      </a>\n    </div>\n    <ul class="nav navbar-nav navbar-right">\n      \n      <li>\n        <form class="navbar-form navbar-right" action="/users">\n          <input name="q" class="form-control" placeholder="Search Warbler" id="search">\n          <button class="btn btn-default">\n            <span class="fa fa-search"></span>\n          </button>\n        </form>\n      </li>\n      \n      \n      <li>\n        <a href="/users/243">\n          <img src="/static/images/default-pic.png" alt="testuser">\n        </a>\n      </li>\n      <li><a href="/messages/new">New Message</a></li>\n      <li><a href="/logout">Log out</a></li>\n      \n    </ul>\n  </div>\n</nav>\n<div class="container">\n  \n\n  \n\n<div id="warbler-hero" class="full-width" style="background-image: url(\'/static/images/warbler-hero.jpg\');"></div>\n\n<img src="/static/images/default-pic.png" alt="Image for testuser" id="profile-avatar">\n<div class="row full-width">\n  <div class="container">\n    <div class="row justify-content-end">\n      <div class="col-9">\n        <ul class="user-stats nav nav-pills">\n          <li class="stat">\n            <p class="small">Messages</p>\n            <h4>\n              <a href="/users/243">1</a>\n            </h4>\n          </li>\n          <li class="stat">\n            <p class="small">Following</p>\n            <h4>\n              <a href="/users/243/following">0</a>\n            </h4>\n          </li>\n          <li class="stat">\n            <p class="small">Followers</p>\n            <h4>\n              <a href="/users/243/followers">0</a>\n            </h4>\n          </li>\n          <li class="stat">\n            <p class="small">Likes</p>\n            <h4>\n              <a href="/users/243/likes">0</a>\n            </h4>\n          </li>\n          <div class="ml-auto">\n            \n            <a href="/users/profile" class="btn btn-outline-secondary">Edit Profile</a>\n            <form method="POST" action="/users/delete" class="form-inline">\n              <button class="btn btn-outline-danger ml-2">Delete Profile</button>\n            </form>\n            \n          </div>\n        </ul>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-3">\n    <h4 id="sidebar-username">@testuser</h4>\n    <p>None</p>\n    <p class="user-location"><span class="fa fa-map-marker"></span>None</p>\n  </div>\n\n  \n  <div class="col-sm-6">\n    <ul class="list-group" id="messages">\n\n      \n\n        <li class="list-group-item">\n          <a href="/messages/24" class="message-link"/>\n\n          <a href="/users/243">\n            <img src="/static/images/default-pic.png" alt="user image" class="timeline-image">\n          </a>\n\n          <div class="message-area">\n            <a href="/users/243">@testuser</a>\n            <span class="text-muted">03 July 2021</span>\n            <p>Hello</p>\n          </div>\n        </li>\n\n      \n\n    </ul>\n  </div>\n\n\n</div>\n\n\n\n</div>\n</body>\n</html>' not found in '<a href="/users/243">@testuser</a>'

----------------------------------------------------------------------
Ran 2 tests in 0.609s

FAILED (failures=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_message_views.py
..
----------------------------------------------------------------------
Ran 2 tests in 0.603s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_message_views.py
..F
======================================================================
FAIL: test_show_message (test_message_views.MessageViewTestCase)
Can show a message?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_message_views.py", line 107, in test_show_message
    self.assertIn(f'<p class="single-message">{m.text}</p>', html)
AssertionError: '<p class="single-message">Went to the ocean today!</p>' not found in '<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">\n<title>404 Not Found</title>\n<h1>Not Found</h1>\n<p>The requested URL was not found on the server.  If you entered the URL manually please check your spelling and try again.</p>\n'

----------------------------------------------------------------------
Ran 3 tests in 0.887s

FAILED (failures=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_message_views.py
...
----------------------------------------------------------------------
Ran 3 tests in 0.891s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_views.py
[2021-07-02 19:33:00,598] ERROR in app: Exception on /signup [POST]
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "users_email_key"
DETAIL:  Key (email)=(test@test.com) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/app.py", line 78, in signup
    db.session.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 249, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 265, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 248, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "users_email_key"
DETAIL:  Key (email)=(test@test.com) already exists.
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': 'test@test.com', 'username': 'testuser', 'image_url': '/static/images/default-pic.png', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$f5jQu9YQPWT4MgLxfmZdBuR.o27wFXwsfaJBC7XzRr9T4nFUUVwHK'}] (Background on this error at: http://sqlalche.me/e/gkpj)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 2292, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1815, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1718, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/_compat.py", line 35, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1813, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/app.py", line 82, in signup
    return render_template('users/signup.html', form=form)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/templating.py", line 135, in render_template
    context, ctx.app)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/templating.py", line 117, in _render
    rv = template.render(context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/templates/users/signup.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/templates/base.html", line 45, in top-level template code
    <a href="/users/{{ g.user.id }}">
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 430, in getattr
    return getattr(obj, attribute)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/attributes.py", line 242, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/attributes.py", line 596, in get
    value = state._load_expired(state, passive)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/state.py", line 615, in _load_expired
    self.manager.deferred_scalar_loader(self, toload)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 876, in load_scalar_attributes
    only_load_props=attribute_names)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 188, in load_on_ident
    identity_token=identity_token
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 250, in load_on_pk_identity
    return q.one()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2954, in one
    ret = self.one_or_none()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2924, in one_or_none
    ret = list(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2995, in __iter__
    return self._execute_and_instances(context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3016, in _execute_and_instances
    close_with_result=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3025, in _get_bind_args
    **kw
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3007, in _connection_from_session
    conn = self.session.connection(**kw)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1035, in connection
    execution_options=execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1040, in _connection_for_bind
    engine, execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 388, in _connection_for_bind
    self._assert_active()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    % self._rollback_exception
sqlalchemy.exc.InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "users_email_key"
DETAIL:  Key (email)=(test@test.com) already exists.
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': 'test@test.com', 'username': 'testuser', 'image_url': '/static/images/default-pic.png', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$f5jQu9YQPWT4MgLxfmZdBuR.o27wFXwsfaJBC7XzRr9T4nFUUVwHK'}] (Background on this error at: http://sqlalche.me/e/gkpj)
F
======================================================================
FAIL: test_signup (test_user_views.UserViewTestCase)
Can add user?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_views.py", line 68, in test_signup
    self.assertEqual(resp.status_code, 302)
AssertionError: 500 != 302

----------------------------------------------------------------------
Ran 1 test in 0.594s

FAILED (failures=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_views.py
[2021-07-02 19:34:41,122] ERROR in app: Exception on /signup [POST]
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "users_email_key"
DETAIL:  Key (email)=(test@test.com) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/app.py", line 78, in signup
    db.session.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 249, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 265, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 248, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "users_email_key"
DETAIL:  Key (email)=(test@test.com) already exists.
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': 'test@test.com', 'username': 'testuser', 'image_url': '/static/images/default-pic.png', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$ygopg/GSYHyv9NdNSyaU9uWuTIcLk239hbwLiseXkBs65CpmXGJCS'}] (Background on this error at: http://sqlalche.me/e/gkpj)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 2292, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1815, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1718, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/_compat.py", line 35, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1813, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/app.py", line 82, in signup
    return render_template('users/signup.html', form=form)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/templating.py", line 135, in render_template
    context, ctx.app)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/templating.py", line 117, in _render
    rv = template.render(context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/templates/users/signup.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/templates/base.html", line 45, in top-level template code
    <a href="/users/{{ g.user.id }}">
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 430, in getattr
    return getattr(obj, attribute)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/attributes.py", line 242, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/attributes.py", line 596, in get
    value = state._load_expired(state, passive)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/state.py", line 615, in _load_expired
    self.manager.deferred_scalar_loader(self, toload)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 876, in load_scalar_attributes
    only_load_props=attribute_names)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 188, in load_on_ident
    identity_token=identity_token
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 250, in load_on_pk_identity
    return q.one()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2954, in one
    ret = self.one_or_none()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2924, in one_or_none
    ret = list(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2995, in __iter__
    return self._execute_and_instances(context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3016, in _execute_and_instances
    close_with_result=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3025, in _get_bind_args
    **kw
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3007, in _connection_from_session
    conn = self.session.connection(**kw)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1035, in connection
    execution_options=execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1040, in _connection_for_bind
    engine, execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 388, in _connection_for_bind
    self._assert_active()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    % self._rollback_exception
sqlalchemy.exc.InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "users_email_key"
DETAIL:  Key (email)=(test@test.com) already exists.
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': 'test@test.com', 'username': 'testuser', 'image_url': '/static/images/default-pic.png', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$ygopg/GSYHyv9NdNSyaU9uWuTIcLk239hbwLiseXkBs65CpmXGJCS'}] (Background on this error at: http://sqlalche.me/e/gkpj)
<Response streamed [500 INTERNAL SERVER ERROR]>
F
======================================================================
FAIL: test_signup (test_user_views.UserViewTestCase)
Can add user?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_views.py", line 69, in test_signup
    self.assertEqual(resp.status_code, 302)
AssertionError: 500 != 302

----------------------------------------------------------------------
Ran 1 test in 0.586s

FAILED (failures=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_views.py
<Response streamed [302 FOUND]>
E
======================================================================
ERROR: test_signup (test_user_views.UserViewTestCase)
Can add user?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2954, in one
    ret = self.one_or_none()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2933, in one_or_none
    "Multiple rows were found for one_or_none()")
sqlalchemy.orm.exc.MultipleResultsFound: Multiple rows were found for one_or_none()

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_views.py", line 71, in test_signup
    u = User.query.one()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2957, in one
    "Multiple rows were found for one()")
sqlalchemy.orm.exc.MultipleResultsFound: Multiple rows were found for one()

----------------------------------------------------------------------
Ran 1 test in 0.569s

FAILED (errors=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_views.py
E
======================================================================
ERROR: test_signup (test_user_views.UserViewTestCase)
Can add user?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_views.py", line 70, in test_signup
    u = User.query.filter_by(User.email == "test2@test.com").first()
TypeError: filter_by() takes 1 positional argument but 2 were given

----------------------------------------------------------------------
Ran 1 test in 0.564s

FAILED (errors=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_views.py
.
----------------------------------------------------------------------
Ran 1 test in 0.570s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_views.py
.**** []
.
----------------------------------------------------------------------
Ran 2 tests in 1.148s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_views.py
[2021-07-02 19:45:34,773] ERROR in app: Exception on /signup [POST]
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "users_username_key"
DETAIL:  Key (username)=(testuser) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/app.py", line 78, in signup
    db.session.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 249, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 265, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 248, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "users_username_key"
DETAIL:  Key (username)=(testuser) already exists.
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': 'test2@test.com', 'username': 'testuser', 'image_url': '/static/images/default-pic.png', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$UX/HkCYd/RFJoq.j8rPHWekHuDFLMrWCm0oNPxJpffQYAl4xEwqfS'}] (Background on this error at: http://sqlalche.me/e/gkpj)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 2292, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1815, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1718, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/_compat.py", line 35, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1813, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/app.py", line 82, in signup
    return render_template('users/signup.html', form=form)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/templating.py", line 135, in render_template
    context, ctx.app)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/templating.py", line 117, in _render
    rv = template.render(context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/templates/users/signup.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/templates/base.html", line 45, in top-level template code
    <a href="/users/{{ g.user.id }}">
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 430, in getattr
    return getattr(obj, attribute)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/attributes.py", line 242, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/attributes.py", line 596, in get
    value = state._load_expired(state, passive)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/state.py", line 615, in _load_expired
    self.manager.deferred_scalar_loader(self, toload)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 876, in load_scalar_attributes
    only_load_props=attribute_names)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 188, in load_on_ident
    identity_token=identity_token
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 250, in load_on_pk_identity
    return q.one()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2954, in one
    ret = self.one_or_none()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2924, in one_or_none
    ret = list(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2995, in __iter__
    return self._execute_and_instances(context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3016, in _execute_and_instances
    close_with_result=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3025, in _get_bind_args
    **kw
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3007, in _connection_from_session
    conn = self.session.connection(**kw)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1035, in connection
    execution_options=execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1040, in _connection_for_bind
    engine, execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 388, in _connection_for_bind
    self._assert_active()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    % self._rollback_exception
sqlalchemy.exc.InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "users_username_key"
DETAIL:  Key (username)=(testuser) already exists.
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': 'test2@test.com', 'username': 'testuser', 'image_url': '/static/images/default-pic.png', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$UX/HkCYd/RFJoq.j8rPHWekHuDFLMrWCm0oNPxJpffQYAl4xEwqfS'}] (Background on this error at: http://sqlalche.me/e/gkpj)
..**** []
.
----------------------------------------------------------------------
Ran 3 tests in 1.701s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_views.py
[2021-07-02 19:45:56,949] ERROR in app: Exception on /signup [POST]
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "users_username_key"
DETAIL:  Key (username)=(testuser) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/app.py", line 78, in signup
    db.session.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 249, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 265, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 248, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "users_username_key"
DETAIL:  Key (username)=(testuser) already exists.
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': 'test2@test.com', 'username': 'testuser', 'image_url': '/static/images/default-pic.png', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$qleJLyzGtJaYVJKJJQdE..FrFK6g3S.61K9qji579arUaw2125/GO'}] (Background on this error at: http://sqlalche.me/e/gkpj)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 2292, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1815, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1718, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/_compat.py", line 35, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1813, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/app.py", line 82, in signup
    return render_template('users/signup.html', form=form)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/templating.py", line 135, in render_template
    context, ctx.app)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/templating.py", line 117, in _render
    rv = template.render(context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/templates/users/signup.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/templates/base.html", line 45, in top-level template code
    <a href="/users/{{ g.user.id }}">
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 430, in getattr
    return getattr(obj, attribute)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/attributes.py", line 242, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/attributes.py", line 596, in get
    value = state._load_expired(state, passive)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/state.py", line 615, in _load_expired
    self.manager.deferred_scalar_loader(self, toload)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 876, in load_scalar_attributes
    only_load_props=attribute_names)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 188, in load_on_ident
    identity_token=identity_token
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 250, in load_on_pk_identity
    return q.one()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2954, in one
    ret = self.one_or_none()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2924, in one_or_none
    ret = list(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2995, in __iter__
    return self._execute_and_instances(context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3016, in _execute_and_instances
    close_with_result=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3025, in _get_bind_args
    **kw
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3007, in _connection_from_session
    conn = self.session.connection(**kw)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1035, in connection
    execution_options=execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1040, in _connection_for_bind
    engine, execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 388, in _connection_for_bind
    self._assert_active()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    % self._rollback_exception
sqlalchemy.exc.InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "users_username_key"
DETAIL:  Key (username)=(testuser) already exists.
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': 'test2@test.com', 'username': 'testuser', 'image_url': '/static/images/default-pic.png', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$qleJLyzGtJaYVJKJJQdE..FrFK6g3S.61K9qji579arUaw2125/GO'}] (Background on this error at: http://sqlalche.me/e/gkpj)
..**** []
.
----------------------------------------------------------------------
Ran 3 tests in 1.701s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_views.py
[2021-07-02 19:47:41,655] ERROR in app: Exception on /signup [POST]
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "users_username_key"
DETAIL:  Key (username)=(testuser) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/app.py", line 78, in signup
    db.session.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 249, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 265, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 248, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "users_username_key"
DETAIL:  Key (username)=(testuser) already exists.
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': 'test2@test.com', 'username': 'testuser', 'image_url': '/static/images/default-pic.png', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$V29.MnJxnWpslb52XCVJROZs8xBVLE9zD2uZ5EIewIQ5ISwUQWMWG'}] (Background on this error at: http://sqlalche.me/e/gkpj)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 2292, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1815, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1718, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/_compat.py", line 35, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1813, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/app.py", line 82, in signup
    return render_template('users/signup.html', form=form)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/templating.py", line 135, in render_template
    context, ctx.app)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/templating.py", line 117, in _render
    rv = template.render(context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/templates/users/signup.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/templates/base.html", line 45, in top-level template code
    <a href="/users/{{ g.user.id }}">
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 430, in getattr
    return getattr(obj, attribute)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/attributes.py", line 242, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/attributes.py", line 596, in get
    value = state._load_expired(state, passive)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/state.py", line 615, in _load_expired
    self.manager.deferred_scalar_loader(self, toload)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 876, in load_scalar_attributes
    only_load_props=attribute_names)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 188, in load_on_ident
    identity_token=identity_token
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 250, in load_on_pk_identity
    return q.one()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2954, in one
    ret = self.one_or_none()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2924, in one_or_none
    ret = list(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2995, in __iter__
    return self._execute_and_instances(context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3016, in _execute_and_instances
    close_with_result=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3025, in _get_bind_args
    **kw
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3007, in _connection_from_session
    conn = self.session.connection(**kw)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1035, in connection
    execution_options=execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1040, in _connection_for_bind
    engine, execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 388, in _connection_for_bind
    self._assert_active()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    % self._rollback_exception
sqlalchemy.exc.InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "users_username_key"
DETAIL:  Key (username)=(testuser) already exists.
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': 'test2@test.com', 'username': 'testuser', 'image_url': '/static/images/default-pic.png', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$V29.MnJxnWpslb52XCVJROZs8xBVLE9zD2uZ5EIewIQ5ISwUQWMWG'}] (Background on this error at: http://sqlalche.me/e/gkpj)
F.**** []
.
======================================================================
FAIL: test_no_signup (test_user_views.UserViewTestCase)
Fail to add user when duplicate username?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_views.py", line 108, in test_no_signup
    self.assertEqual(resp.status_code, 302)
AssertionError: 500 != 302

----------------------------------------------------------------------
Ran 3 tests in 1.703s

FAILED (failures=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_views.py
[2021-07-02 19:48:12,315] ERROR in app: Exception on /signup [POST]
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "users_username_key"
DETAIL:  Key (username)=(testuser) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/app.py", line 78, in signup
    db.session.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 249, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 265, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 248, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "users_username_key"
DETAIL:  Key (username)=(testuser) already exists.
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': 'test2@test.com', 'username': 'testuser', 'image_url': '/static/images/default-pic.png', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$rlAm93h0.8cWk0Y20Ghu9uvHoFu8QdqxO46pM9iUu6ioBItIqfcF2'}] (Background on this error at: http://sqlalche.me/e/gkpj)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 2292, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1815, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1718, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/_compat.py", line 35, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1813, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/app.py", line 82, in signup
    return render_template('users/signup.html', form=form)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/templating.py", line 135, in render_template
    context, ctx.app)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/templating.py", line 117, in _render
    rv = template.render(context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/templates/users/signup.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/templates/base.html", line 45, in top-level template code
    <a href="/users/{{ g.user.id }}">
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 430, in getattr
    return getattr(obj, attribute)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/attributes.py", line 242, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/attributes.py", line 596, in get
    value = state._load_expired(state, passive)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/state.py", line 615, in _load_expired
    self.manager.deferred_scalar_loader(self, toload)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 876, in load_scalar_attributes
    only_load_props=attribute_names)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 188, in load_on_ident
    identity_token=identity_token
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 250, in load_on_pk_identity
    return q.one()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2954, in one
    ret = self.one_or_none()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2924, in one_or_none
    ret = list(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2995, in __iter__
    return self._execute_and_instances(context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3016, in _execute_and_instances
    close_with_result=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3025, in _get_bind_args
    **kw
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3007, in _connection_from_session
    conn = self.session.connection(**kw)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1035, in connection
    execution_options=execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1040, in _connection_for_bind
    engine, execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 388, in _connection_for_bind
    self._assert_active()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    % self._rollback_exception
sqlalchemy.exc.InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "users_username_key"
DETAIL:  Key (username)=(testuser) already exists.
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': 'test2@test.com', 'username': 'testuser', 'image_url': '/static/images/default-pic.png', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$rlAm93h0.8cWk0Y20Ghu9uvHoFu8QdqxO46pM9iUu6ioBItIqfcF2'}] (Background on this error at: http://sqlalche.me/e/gkpj)
F..
======================================================================
FAIL: test_no_signup (test_user_views.UserViewTestCase)
Fail to add user when duplicate username?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_views.py", line 108, in test_no_signup
    self.assertEqual(resp.status_code, 302)
AssertionError: 500 != 302

----------------------------------------------------------------------
Ran 3 tests in 1.708s

FAILED (failures=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_views.py
[2021-07-02 19:52:54,294] ERROR in app: Exception on /signup [POST]
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "users_username_key"
DETAIL:  Key (username)=(testuser) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/app.py", line 78, in signup
    db.session.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 249, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 265, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 248, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "users_username_key"
DETAIL:  Key (username)=(testuser) already exists.
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': 'test2@test.com', 'username': 'testuser', 'image_url': '/static/images/default-pic.png', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$5KZ0LXqG4NUJc3/QtIywleepFcskKXv9/iL4WQhZjcZITo3R2z8Ia'}] (Background on this error at: http://sqlalche.me/e/gkpj)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 2292, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1815, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1718, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/_compat.py", line 35, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1813, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/app.py", line 82, in signup
    return render_template('users/signup.html', form=form)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/templating.py", line 135, in render_template
    context, ctx.app)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/templating.py", line 117, in _render
    rv = template.render(context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/templates/users/signup.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/templates/base.html", line 45, in top-level template code
    <a href="/users/{{ g.user.id }}">
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 430, in getattr
    return getattr(obj, attribute)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/attributes.py", line 242, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/attributes.py", line 596, in get
    value = state._load_expired(state, passive)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/state.py", line 615, in _load_expired
    self.manager.deferred_scalar_loader(self, toload)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 876, in load_scalar_attributes
    only_load_props=attribute_names)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 188, in load_on_ident
    identity_token=identity_token
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 250, in load_on_pk_identity
    return q.one()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2954, in one
    ret = self.one_or_none()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2924, in one_or_none
    ret = list(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2995, in __iter__
    return self._execute_and_instances(context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3016, in _execute_and_instances
    close_with_result=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3025, in _get_bind_args
    **kw
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3007, in _connection_from_session
    conn = self.session.connection(**kw)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1035, in connection
    execution_options=execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1040, in _connection_for_bind
    engine, execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 388, in _connection_for_bind
    self._assert_active()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    % self._rollback_exception
sqlalchemy.exc.InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "users_username_key"
DETAIL:  Key (username)=(testuser) already exists.
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': 'test2@test.com', 'username': 'testuser', 'image_url': '/static/images/default-pic.png', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$5KZ0LXqG4NUJc3/QtIywleepFcskKXv9/iL4WQhZjcZITo3R2z8Ia'}] (Background on this error at: http://sqlalche.me/e/gkpj)
F..
======================================================================
FAIL: test_no_signup (test_user_views.UserViewTestCase)
Fail to add user when duplicate username?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_views.py", line 109, in test_no_signup
    resp = c.post("/signup", data=data, follow_redirects=True)
AssertionError: IntegrityError not raised

----------------------------------------------------------------------
Ran 3 tests in 1.706s

FAILED (failures=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_views.py
[2021-07-02 19:53:50,465] ERROR in app: Exception on /signup [POST]
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "users_username_key"
DETAIL:  Key (username)=(testuser) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/app.py", line 78, in signup
    db.session.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 249, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 265, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 248, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "users_username_key"
DETAIL:  Key (username)=(testuser) already exists.
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': 'test2@test.com', 'username': 'testuser', 'image_url': '/static/images/default-pic.png', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$YNiokpttPTNP5WdVZjJCAueET9e3vKCY5Hflh71N6mZMpBTQ4AgGW'}] (Background on this error at: http://sqlalche.me/e/gkpj)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 2292, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1815, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1718, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/_compat.py", line 35, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1813, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/app.py", line 82, in signup
    return render_template('users/signup.html', form=form)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/templating.py", line 135, in render_template
    context, ctx.app)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/templating.py", line 117, in _render
    rv = template.render(context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/templates/users/signup.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/templates/base.html", line 45, in top-level template code
    <a href="/users/{{ g.user.id }}">
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 430, in getattr
    return getattr(obj, attribute)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/attributes.py", line 242, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/attributes.py", line 596, in get
    value = state._load_expired(state, passive)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/state.py", line 615, in _load_expired
    self.manager.deferred_scalar_loader(self, toload)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 876, in load_scalar_attributes
    only_load_props=attribute_names)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 188, in load_on_ident
    identity_token=identity_token
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 250, in load_on_pk_identity
    return q.one()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2954, in one
    ret = self.one_or_none()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2924, in one_or_none
    ret = list(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2995, in __iter__
    return self._execute_and_instances(context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3016, in _execute_and_instances
    close_with_result=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3025, in _get_bind_args
    **kw
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3007, in _connection_from_session
    conn = self.session.connection(**kw)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1035, in connection
    execution_options=execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1040, in _connection_for_bind
    engine, execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 388, in _connection_for_bind
    self._assert_active()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    % self._rollback_exception
sqlalchemy.exc.InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "users_username_key"
DETAIL:  Key (username)=(testuser) already exists.
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': 'test2@test.com', 'username': 'testuser', 'image_url': '/static/images/default-pic.png', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$YNiokpttPTNP5WdVZjJCAueET9e3vKCY5Hflh71N6mZMpBTQ4AgGW'}] (Background on this error at: http://sqlalche.me/e/gkpj)
...
----------------------------------------------------------------------
Ran 3 tests in 1.692s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_views.py
[2021-07-02 19:54:39,484] ERROR in app: Exception on /signup [POST]
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "users_username_key"
DETAIL:  Key (username)=(testuser) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/app.py", line 78, in signup
    db.session.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/scoping.py", line 153, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 943, in commit
    self.transaction.commit()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 467, in commit
    self._prepare_impl()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 447, in _prepare_impl
    self.session.flush()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2254, in flush
    self._flush(objects)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2380, in _flush
    transaction.rollback(_capture_exception=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py", line 66, in __exit__
    compat.reraise(exc_type, exc_value, exc_tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 249, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 2344, in _flush
    flush_context.execute()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 391, in execute
    rec.execute(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 556, in execute
    uow
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 181, in save_obj
    mapper, table, insert)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 866, in _emit_insert_statements
    execute(statement, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 948, in execute
    return meth(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 269, in _execute_on_connection
    return connection._execute_clauseelement(self, multiparams, params)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1060, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1200, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1413, in _handle_dbapi_exception
    exc_info
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 265, in raise_from_cause
    reraise(type(exception), exception, tb=exc_tb, cause=cause)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 248, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1193, in _execute_context
    context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 509, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "users_username_key"
DETAIL:  Key (username)=(testuser) already exists.
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': 'test2@test.com', 'username': 'testuser', 'image_url': '/static/images/default-pic.png', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$dNlDEaRlr0lMudXgOxfAfOk4LMWd1Uj9f/J3QYNh5zh1Y28SCoAfq'}] (Background on this error at: http://sqlalche.me/e/gkpj)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 2292, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1815, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1718, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/_compat.py", line 35, in reraise
    raise value
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1813, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/app.py", line 82, in signup
    return render_template('users/signup.html', form=form)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/templating.py", line 135, in render_template
    context, ctx.app)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/templating.py", line 117, in _render
    rv = template.render(context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/asyncsupport.py", line 76, in render
    return original_render(self, *args, **kwargs)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 1008, in render
    return self.environment.handle_exception(exc_info, True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 780, in handle_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/_compat.py", line 37, in reraise
    raise value.with_traceback(tb)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/templates/users/signup.html", line 1, in top-level template code
    {% extends 'base.html' %}
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/templates/base.html", line 45, in top-level template code
    <a href="/users/{{ g.user.id }}">
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/jinja2/environment.py", line 430, in getattr
    return getattr(obj, attribute)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/attributes.py", line 242, in __get__
    return self.impl.get(instance_state(instance), dict_)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/attributes.py", line 596, in get
    value = state._load_expired(state, passive)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/state.py", line 615, in _load_expired
    self.manager.deferred_scalar_loader(self, toload)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 876, in load_scalar_attributes
    only_load_props=attribute_names)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 188, in load_on_ident
    identity_token=identity_token
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/loading.py", line 250, in load_on_pk_identity
    return q.one()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2954, in one
    ret = self.one_or_none()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2924, in one_or_none
    ret = list(self)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 2995, in __iter__
    return self._execute_and_instances(context)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3016, in _execute_and_instances
    close_with_result=True)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3025, in _get_bind_args
    **kw
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3007, in _connection_from_session
    conn = self.session.connection(**kw)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1035, in connection
    execution_options=execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1040, in _connection_for_bind
    engine, execution_options)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 388, in _connection_for_bind
    self._assert_active()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 276, in _assert_active
    % self._rollback_exception
sqlalchemy.exc.InvalidRequestError: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "users_username_key"
DETAIL:  Key (username)=(testuser) already exists.
 [SQL: 'INSERT INTO users (email, username, image_url, header_image_url, bio, location, password) VALUES (%(email)s, %(username)s, %(image_url)s, %(header_image_url)s, %(bio)s, %(location)s, %(password)s) RETURNING users.id'] [parameters: {'email': 'test2@test.com', 'username': 'testuser', 'image_url': '/static/images/default-pic.png', 'header_image_url': '/static/images/warbler-hero.jpg', 'bio': None, 'location': None, 'password': '$2b$12$dNlDEaRlr0lMudXgOxfAfOk4LMWd1Uj9f/J3QYNh5zh1Y28SCoAfq'}] (Background on this error at: http://sqlalche.me/e/gkpj)
F..
======================================================================
FAIL: test_no_signup (test_user_views.UserViewTestCase)
Fail to add user when duplicate username?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_views.py", line 112, in test_no_signup
    self.assertIn('<h2 class="join-message">Join Warbler today.</h2>', html)
AssertionError: '<h2 class="join-message">Join Warbler today.</h2>' not found in '<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">\n<title>500 Internal Server Error</title>\n<h1>Internal Server Error</h1>\n<p>The server encountered an internal error and was unable to complete your request.  Either the server is overloaded or there is an error in the application.</p>\n'

----------------------------------------------------------------------
Ran 3 tests in 1.704s

FAILED (failures=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_views.py
F..
======================================================================
FAIL: test_logged_in_can_view_follower_page (test_user_views.UserViewTestCase)
Can a logged in user view a follower page?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_views.py", line 136, in test_logged_in_can_view_follower_page
    self.assertIn(f'<div class="col-lg-4 col-md-6 col-12">', html)
AssertionError: '<div class="col-lg-4 col-md-6 col-12">' not found in '<!DOCTYPE html>\n<html lang="en">\n\n<head>\n  <meta charset="UTF-8">\n  <title>Warbler</title>\n\n  <link rel="stylesheet"\n        href="https://unpkg.com/bootstrap/dist/css/bootstrap.css">\n  <script src="https://unpkg.com/jquery"></script>\n  <script src="https://unpkg.com/popper"></script>\n  <script src="https://unpkg.com/bootstrap"></script>\n\n  <link rel="stylesheet"\n        href="https://use.fontawesome.com/releases/v5.3.1/css/all.css">\n  <link rel="stylesheet" href="/static/stylesheets/style.css">\n  <link rel="shortcut icon" href="/static/favicon.ico">\n</head>\n\n<body class="">\n<nav class="navbar navbar-expand">\n  <div class="container-fluid">\n    <div class="navbar-header">\n      <a href="/" class="navbar-brand">\n        <img src="/static/images/warbler-logo.png" alt="logo">\n        <span>Warbler</span>\n      </a>\n    </div>\n    <ul class="nav navbar-nav navbar-right">\n      \n      <li>\n        <form class="navbar-form navbar-right" action="/users">\n          <input name="q" class="form-control" placeholder="Search Warbler" id="search">\n          <button class="btn btn-default">\n            <span class="fa fa-search"></span>\n          </button>\n        </form>\n      </li>\n      \n      \n      <li>\n        <a href="/users/308">\n          <img src="/static/images/default-pic.png" alt="testuser">\n        </a>\n      </li>\n      <li><a href="/messages/new">New Message</a></li>\n      <li><a href="/logout">Log out</a></li>\n      \n    </ul>\n  </div>\n</nav>\n<div class="container">\n  \n\n  \n\n<div id="warbler-hero" class="full-width" style="background-image: url(\'/static/images/warbler-hero.jpg\');"></div>\n\n<img src="/static/images/default-pic.png" alt="Image for testuser2" id="profile-avatar">\n<div class="row full-width">\n  <div class="container">\n    <div class="row justify-content-end">\n      <div class="col-9">\n        <ul class="user-stats nav nav-pills">\n          <li class="stat">\n            <p class="small">Messages</p>\n            <h4>\n              <a href="/users/309">0</a>\n            </h4>\n          </li>\n          <li class="stat">\n            <p class="small">Following</p>\n            <h4>\n              <a href="/users/309/following">0</a>\n            </h4>\n          </li>\n          <li class="stat">\n            <p class="small">Followers</p>\n            <h4>\n              <a href="/users/309/followers">0</a>\n            </h4>\n          </li>\n          <li class="stat">\n            <p class="small">Likes</p>\n            <h4>\n              <a href="/users/309/likes">0</a>\n            </h4>\n          </li>\n          <div class="ml-auto">\n            \n            \n            <form method="POST" action="/users/follow/309">\n              <button class="btn btn-outline-primary">Follow</button>\n            </form>\n            \n            \n          </div>\n        </ul>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-3">\n    <h4 id="sidebar-username">@testuser2</h4>\n    <p>None</p>\n    <p class="user-location"><span class="fa fa-map-marker"></span>None</p>\n  </div>\n\n  \n  <div class="col-sm-9">\n    <div class="row">\n\n      \n\n    </div>\n  </div>\n\n\n</div>\n\n\n\n</div>\n</body>\n</html>'

----------------------------------------------------------------------
Ran 3 tests in 1.698s

FAILED (failures=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_views.py
...
----------------------------------------------------------------------
Ran 3 tests in 1.700s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_views.py
.E..
======================================================================
ERROR: test_not_logged_in_cant_view_following_page (test_user_views.UserViewTestCase)
A user that is not logged in cannot view a following page?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_views.py", line 146, in test_not_logged_in_cant_view_following_page
    do_logout()
NameError: name 'do_logout' is not defined

----------------------------------------------------------------------
Ran 4 tests in 1.966s

FAILED (errors=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_views.py
E
======================================================================
ERROR: test_user_views (unittest.loader._FailedTest)
----------------------------------------------------------------------
ImportError: Failed to import test module: test_user_views
Traceback (most recent call last):
  File "/usr/local/Cellar/python@3.7/3.7.10_3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/unittest/loader.py", line 154, in loadTestsFromName
    module = __import__(module_name)
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_views.py", line 12, in <module>
    from models import db, connect_db, Message, User, do_logout
ImportError: cannot import name 'do_logout' from 'models' (/Users/christenmccool/Documents/springboard-practice/26warbler/models.py)


----------------------------------------------------------------------
Ran 1 test in 0.000s

FAILED (errors=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_views.py
.E..
======================================================================
ERROR: test_not_logged_in_cant_view_following_page (test_user_views.UserViewTestCase)
A user that is not logged in cannot view a following page?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_views.py", line 147, in test_not_logged_in_cant_view_following_page
    do_logout()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/app.py", line 52, in do_logout
    if CURR_USER_KEY in session:
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/werkzeug/local.py", line 379, in <lambda>
    __contains__ = lambda x, i: i in x._get_current_object()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/werkzeug/local.py", line 306, in _get_current_object
    return self.__local()
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/venv/lib/python3.7/site-packages/flask/globals.py", line 37, in _lookup_req_object
    raise RuntimeError(_request_ctx_err_msg)
RuntimeError: Working outside of request context.

This typically means that you attempted to use functionality that needed
an active HTTP request.  Consult the documentation on testing for
information about how to avoid this problem.

----------------------------------------------------------------------
Ran 4 tests in 2.227s

FAILED (errors=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_views.py
....
----------------------------------------------------------------------
Ran 4 tests in 2.253s

OK
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_views.py
.F..
======================================================================
FAIL: test_not_logged_in_cant_view_following_page (test_user_views.UserViewTestCase)
A user that is not logged in cannot view a following page?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_views.py", line 162, in test_not_logged_in_cant_view_following_page
    self.assertIn('<div class="home-hero">', html)
AssertionError: '<div class="home-hero">' not found in '<!DOCTYPE html>\n<html lang="en">\n\n<head>\n  <meta charset="UTF-8">\n  <title>Warbler</title>\n\n  <link rel="stylesheet"\n        href="https://unpkg.com/bootstrap/dist/css/bootstrap.css">\n  <script src="https://unpkg.com/jquery"></script>\n  <script src="https://unpkg.com/popper"></script>\n  <script src="https://unpkg.com/bootstrap"></script>\n\n  <link rel="stylesheet"\n        href="https://use.fontawesome.com/releases/v5.3.1/css/all.css">\n  <link rel="stylesheet" href="/static/stylesheets/style.css">\n  <link rel="shortcut icon" href="/static/favicon.ico">\n</head>\n\n<body class="">\n<nav class="navbar navbar-expand">\n  <div class="container-fluid">\n    <div class="navbar-header">\n      <a href="/" class="navbar-brand">\n        <img src="/static/images/warbler-logo.png" alt="logo">\n        <span>Warbler</span>\n      </a>\n    </div>\n    <ul class="nav navbar-nav navbar-right">\n      \n      <li>\n        <form class="navbar-form navbar-right" action="/users">\n          <input name="q" class="form-control" placeholder="Search Warbler" id="search">\n          <button class="btn btn-default">\n            <span class="fa fa-search"></span>\n          </button>\n        </form>\n      </li>\n      \n      \n      <li>\n        <a href="/users/337">\n          <img src="/static/images/default-pic.png" alt="testuser">\n        </a>\n      </li>\n      <li><a href="/messages/new">New Message</a></li>\n      <li><a href="/logout">Log out</a></li>\n      \n    </ul>\n  </div>\n</nav>\n<div class="container">\n  \n\n  \n\n<div id="warbler-hero" class="full-width" style="background-image: url(\'/static/images/warbler-hero.jpg\');"></div>\n\n<img src="/static/images/default-pic.png" alt="Image for testuser2" id="profile-avatar">\n<div class="row full-width">\n  <div class="container">\n    <div class="row justify-content-end">\n      <div class="col-9">\n        <ul class="user-stats nav nav-pills">\n          <li class="stat">\n            <p class="small">Messages</p>\n            <h4>\n              <a href="/users/338">0</a>\n            </h4>\n          </li>\n          <li class="stat">\n            <p class="small">Following</p>\n            <h4>\n              <a href="/users/338/following">0</a>\n            </h4>\n          </li>\n          <li class="stat">\n            <p class="small">Followers</p>\n            <h4>\n              <a href="/users/338/followers">0</a>\n            </h4>\n          </li>\n          <li class="stat">\n            <p class="small">Likes</p>\n            <h4>\n              <a href="/users/338/likes">0</a>\n            </h4>\n          </li>\n          <div class="ml-auto">\n            \n            \n            <form method="POST" action="/users/follow/338">\n              <button class="btn btn-outline-primary">Follow</button>\n            </form>\n            \n            \n          </div>\n        </ul>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-3">\n    <h4 id="sidebar-username">@testuser2</h4>\n    <p>None</p>\n    <p class="user-location"><span class="fa fa-map-marker"></span>None</p>\n  </div>\n\n  \n  <div class="col-sm-9">\n    <div class="row">\n\n      \n\n    </div>\n  </div>\n\n\n</div>\n\n\n\n</div>\n</body>\n</html>'

----------------------------------------------------------------------
Ran 4 tests in 2.265s

FAILED (failures=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % python3 -m unittest test_user_views.py
.F..
======================================================================
FAIL: test_not_logged_in_cant_view_following_page (test_user_views.UserViewTestCase)
A user that is not logged in cannot view a following page?
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/christenmccool/Documents/springboard-practice/26warbler/test_user_views.py", line 163, in test_not_logged_in_cant_view_following_page
    self.assertIn("<h1>What's Happening?</h1> <h4>New to Warbler?</h4>", html)
AssertionError: "<h1>What's Happening?</h1> <h4>New to Warbler?</h4>" not found in '<!DOCTYPE html>\n<html lang="en">\n\n<head>\n  <meta charset="UTF-8">\n  <title>Warbler</title>\n\n  <link rel="stylesheet"\n        href="https://unpkg.com/bootstrap/dist/css/bootstrap.css">\n  <script src="https://unpkg.com/jquery"></script>\n  <script src="https://unpkg.com/popper"></script>\n  <script src="https://unpkg.com/bootstrap"></script>\n\n  <link rel="stylesheet"\n        href="https://use.fontawesome.com/releases/v5.3.1/css/all.css">\n  <link rel="stylesheet" href="/static/stylesheets/style.css">\n  <link rel="shortcut icon" href="/static/favicon.ico">\n</head>\n\n<body class="">\n<nav class="navbar navbar-expand">\n  <div class="container-fluid">\n    <div class="navbar-header">\n      <a href="/" class="navbar-brand">\n        <img src="/static/images/warbler-logo.png" alt="logo">\n        <span>Warbler</span>\n      </a>\n    </div>\n    <ul class="nav navbar-nav navbar-right">\n      \n      <li>\n        <form class="navbar-form navbar-right" action="/users">\n          <input name="q" class="form-control" placeholder="Search Warbler" id="search">\n          <button class="btn btn-default">\n            <span class="fa fa-search"></span>\n          </button>\n        </form>\n      </li>\n      \n      \n      <li><a href="/signup">Sign up</a></li>\n      <li><a href="/login">Log in</a></li>\n      \n    </ul>\n  </div>\n</nav>\n<div class="container">\n  \n  <div class="alert alert-danger">Access unauthorized.</div>\n  \n\n  \n  <div class="home-hero">\n    <h1>What\'s Happening?</h1>\n    <h4>New to Warbler?</h4>\n    <p>Sign up now to get your own personalized timeline!</p>\n    <a href="/signup" class="btn btn-primary">Sign up</a>\n  </div>\n\n\n</div>\n</body>\n</html>'

----------------------------------------------------------------------
Ran 4 tests in 2.244s

FAILED (failures=1)
(venv) christenmccool@Christens-MacBook-Pro 26warbler % 
